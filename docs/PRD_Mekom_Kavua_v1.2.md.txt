# מסמך אפיון ותכנון מוצר (PRD): פלטפורמת "מקום קבוע"
גרסה 1.2
מסמך אפיון ותכנון מוצר (PRD): פלטפורמת "מקום קבוע"
גרסה 1.2
חזון: להוות את הפתרון המוביל והסטנדרט בתעשייה לניהול, תכנון והושבה בבתי כנסת, ישיבות ומוסדות קהילתיים, על ידי הפיכת התהליך המורכב והרגיש לפשוט, שקוף, הוגן ויעיל, באמצעות כלי טכנולוגי אינטואיטיבי המונע על ידי AI.
פלטפורמה: יישום רשת (Web Application) מבוסס דפדפן, עם ארכיטקטורת Mobile-First עבור ממשק המתפלל וארכיטקטורת Desktop-First עבור ממשק הניהול של הגבאי.
מודול 1: רישום, אימות וכניסה למערכת (Onboarding & Authentication)
1.1. תהליך רישום מוסד:
* טופס רישום שיכלול שדות חובה: שם המוסד, נוסח תפילה ראשי (לבחירה מתוך רשימה: אשכנז, ספרד, עדות המזרח, תימן וכו'), כתובת פיזית.
* טופס רישום פרטי מנהל (גבאי): שם מלא, תפקיד, דוא"ל (ישמש כשם המשתמש), מספר טלפון.
1.2. מנגנון אימות מנהל:
* תהליך אימות חובה למניעת שימוש לרעה. המנהל יבחר אחת מהאפשרויות:
* קישור לדף רשמי של המוסד (למשל, ב"נדרים פלוס", אתר המועצה הדתית, אתר המוסד).
* צירוף מסמך רשמי.
* אימות טלפוני אוטומטי.
* חשבון המוסד יופעל רק לאחר אישור האימות על ידי צוות המערכת.
1.3. "אשף הגדרה" ראשוני (Setup Wizard):
* יופעל אוטומטית בכניסה הראשונה לאחר אימות.
* שלב א' - קישורים (אופציונלי): הצעה לאינטגרציה עם "נדרים פלוס" באמצעות API (אם זמין ורלוונטי).
* שלב ב' - תבניות מבנה (Presets): המנהל יבחר תבנית בסיס ויזואלית שתשמש כנקודת התחלה למפה:
* תבנית "אשכנזי קלאסי": טורים ארוכים של ספסלים הפונים לארון הקודש.
* תבנית "ספרדי": מקומות ישיבה סביב בימה מרכזית.
* תבנית "ישיבה": מבנה של סטנדרים בשורות.
* "התחל מקנבס ריק".
* האשף יוצר את מבנה הבסיס ומוביל את המשתמש ישירות למודול בניית המפה.
מודול 2: עורך מפות דינמי (Dynamic Map Editor)
זהו ממשק הליבה הוויזואלי. עליו להיות גמיש, מהיר ומדויק.
2.1. סביבת העבודה:
* קנבס (Canvas) מרכזי: אזור העבודה הראשי להצגה ועריכת המפה.
* סרגל כלים דינמי: יציג כלים רלוונטיים בהתאם לאובייקט הנבחר.
* צ'אטבוט AI (עוזר אישי): ימוקם בחלונית צדדית. יוכל לפרש פקודות בשפה טבעית ("תמחק את כל הכיסאות בטור השלישי") ולבצע אותן, בנוסף למתן עזרה והדרכה.
2.2. יכולות עריכה ובנייה:
* הוספת אלמנטים: כלים ייעודיים להוספת "טור כיסאות", "שורת כיסאות", "כיסא בודד". כל אלמנט ניתן להתאמה אישית (מספר כיסאות, מרווחים).
* מניפולציה של אובייקטים: כל האובייקטים (כיסאות, טורים, אובייקטים פיזיים) יהיו ניתנים לגרירה (Drag & Drop), שינוי גודל וסיבוב.
* מנגנון "הצמדה לרשת" (Snap to Grid): יופעל כברירת מחדל כדי להבטיח יישור מדויק וסימטריה. כל הוספה או הזזה של אובייקט תגרום לסידור אוטומטי חכם של שאר האלמנטים כדי לשמור על סדר לוגי.
* אובייקטים פיזיים וייעודיים:
* ספריית אובייקטים מוכנים לגרירה: ארון קודש, בימה, עמודים, פתחי כניסה/יציאה, מחיצה.
* אובייקט מותאם אישית ("אחר"): אובייקט גנרי שניתן להוסיף למפה. עם הוספתו, המשתמש יוכל להזין עבורו שם מותאם אישית (למשל, "עמדת קפה", "פינת אבלים", "עמוד חזן"). אובייקט זה יוכל לשמש לאחר מכן במנוע החוקים.
2.3. כלי בחירה מתקדמים:
* בחירה מרובה רגילה: לחיצה על Ctrl/Cmd ובחירת מספר אובייקטים.
* בחירת אזור חופשית (Polygon Selection): כלי שיאפשר למשתמש למתוח קווים נקודה-אחר-נקודה עד לסגירת שטח פוליגונלי לא רגולרי. כל הכיסאות בתוך השטח המסומן ייבחרו. כלי זה קריטי לגמישות מירבית בבתי כנסת עם מבנה לא סטנדרטי.
2.4. מצבי תצוגה (View Modes):
* המנהל יוכל לעבור בין מצבי תצוגה שונים של המפה בלחיצת כפתור:
* תצוגת עריכה (ברירת מחדל): מראה את מבנה המפה.
* תצוגת סטטוסים: צובעת כל כיסא לפי הסטטוס שלו (פנוי, תפוס, שמור, בבקשה, נעול), עם מקרא ברור בצד.
* תצוגת "מפת חום" (Heatmap): צובעת כל כיסא על סקאלה מירוק (ניקוד גבוה) לאדום (ניקוד נמוך) בהתבסס על מערכת החוקים הפעילה.
2.5. ניהול גרסאות:
* שמירה אוטומטית בענן: כל שינוי יישמר בזמן אמת.
* היסטוריית שינויים מלאה (Undo/Redo): Ctrl+Z / Ctrl+Y.
* שמירת "תמונות מצב" (Snapshots): יכולת לשמור גרסה שלמה של המפה והחוקים תחת שם (לדוגמה: "מפת ימים נוראים תשפ"ה").
מודול 3: מנוע חוקים וניקוד (Rules & Scoring Engine)
המוח של המערכת. יתבסס על AI כדי להפוך הגדרות מורכבות לפשוטות.
3.1. ממשק הגדרת חוקים:
* "ראיון" מונחה AI: הצ'אטבוט ינהל דיאלוג עם המנהל כדי להגדיר את החוקים, במקום להציג טפסים מורכבים. ("האם קרבה לארון הקודש נותנת יותר נקודות מקרבה לפתח היציאה?").
* רשימת חוקים פעילים: בצד המסך תוצג רשימה של החוקים שהוגדרו, ניתנים לעריכה, כיבוי/הדלקה ומחיקה.
3.2. קטגוריות חוקים:
* חוקי מיקום: ניקוד על פי קרבה/ריחוק לאובייקטים פיזיים (כולל האובייקטים המותאמים אישית), מיקום בשורה/טור, מיקום פינתי/אמצעי בספסל.
* חוקי מתפללים: ניקוד על סמך נתונים אישיים מהפרופיל של המתפלל (ותק, גיל, תפקיד, סטטוס תרומה, וכו').
* חוקי אילוצים (Constraints):
* קיבוץ (Clustering): הגדרת קבוצות (למשל, "משפחת לוי") שחייבות לשבת יחד.
* ריחוק (Exclusion): הגדרת זוגות או קבוצות שאסור להושיב בסמיכות.
* דרישות מיוחדות: סימון כיסאות כ"נגישים" או "ללא מדרגות".
3.3. פידבק בזמן אמת:
* כל שינוי בחוק יעדכן מיידית את ניקוד הכיסאות ואת "מפת החום" בתצוגה המקדימה, כדי שהמנהל יראה מיד את השפעת השינוי.
מודול 4: ניהול ושיבוץ מתפללים (Placement & Assignment)
השלב האופרטיבי של הושבת המתפללים על גבי המפה.
4.1. מאגר מתפללים (CRM):
* ייבוא נתונים חכם: מנגנון ייבוא מקובץ (Excel/CSV) עם יכולת מיפוי עמודות דינמית.
* "כרטיס מתפלל" מקיף: יכלול את כל הנתונים הדמוגרפיים, הקהילתיים וההעדפות הרלוונטיים למנוע החוקים.
4.2. תהליך שיבוץ היברידי:
* שיבוץ ידני "נעול": גרירת מתפלל מהרשימה לכיסא ספציפי. כיסא זה "יינעל" ולא יושפע מהשיבוץ האוטומטי.
* שיבוץ אוטומטי חכם:
1. האלגוריתם מחשב ציון התאמה לכל מתפלל על בסיס החוקים.
2. האלגוריתם משבץ את המתפללים בסדר יורד של ציון, למקומות הפנויים עם הניקוד הגבוה ביותר, תוך עמידה בכל האילוצים. שינוי מיקום של מתפלל ששובץ אוטומטית יגרום לחישוב מחדש של אלו שאחריו, מבלי לגעת בנעולים.
* שיבוץ חלקי/ממוקד: יכולת להריץ את האלגוריתם רק על קבוצת מתפללים מסוימת או רק על אזור מוגדר במפה.
4.3. מנגנון שיבוץ רנדומלי להוגנות (Fairness Tie-Breaker):
* במקרים של "שוויון נקודות" בין מתפללים ו/או מקומות, המערכת תפעיל לוגיקת שיבוץ רנדומלית כדי להבטיח הוגנות ולמנוע טענות על העדפה.
* תרחיש א': מספר מתפללים בעלי ניקוד זהה מתחרים על מספר מצומצם של מקומות בעלי ניקוד גבוה. המערכת תשבץ אותם באופן אקראי במקומות אלו.
* תרחיש ב': מתפלל אחד זכאי למקום עם ניקוד מסוים, וישנם מספר מקומות פנויים העונים על אותו ניקוד. המערכת תבחר עבורו מקום באופן אקראי מתוך האפשרויות.
4.4. פתרון קונפליקטים מבוסס AI:
* כאשר יזוהה קונפליקט, המערכת תתריע ותציע פתרון אופטימלי עם אפשרות לאישור וביצוע בלחיצת כפתור.
מודול 5: תקשורת ופלט (Communication & Output)
השלב האחרון של הפצת המידע והפקת תוצרים.
5.1. פורטל אינטראקטיבי למתפלל:
* אפשרות לשליחת קישור אישי (מייל/SMS) למתפללים המאפשר להם לבצע פעולות מוגדרות מראש על ידי הגבאי (למשל, רק לצפות במקום, או לבקש שינוי).
* הממשק יהיה מותאם באופן מלא למובייל.
5.2. יכולות הפקה (Export):
* ייצוא ל-PDF: הפקת קובץ PDF איכותי של המפה עם שמות המתפללים, מוכן להדפסה או לשליחה דיגיטלית.
* הדפסה ישירה: ממשק הדפסה מובנה מהדפדפן.
* שיתוף קישור (Read-Only): יצירת קישור ציבורי למפה הסופית לצפייה בלבד.